#!/usr/bin/env python

"""Xen based execution environment (XBE) commandline tool.

usage: xbe <subcommand> [options] [args]
Version: $Revision: $
Author: Alexander Petry <petry@itwm.fhg.de>

Type 'svn help <subcommand>' for help on a specific subcommand.

Available subcommands:

       help

"""
import xenbeed

import logging, sys
log = logging.getLogger(__name__)

from optparse import OptionParser
parser = OptionParser


class Command(object):
    """The base class for commands."""

class Command_help(Command):
    """The help command."""
    def __init__(self, argv):
        self.subcmd = createCommand(argv)
        self.__doc__ = __doc__

def help(cmd=None):
    if not cmd:
        print >>sys.stderr, "Type 'xbe help' for usage."
    else:
        print >>sys.stderr, cmd.__doc__

def createCommand(argv):
    """Creates a command object from the given command line."""
    if len(argv):
        try:
            return eval("Command_%s(%s)" % (argv[0], "argv[1:]"))
        except NameError, ne:
            print >>sys.stderr, "Unknown command: '%s'" % argv[0]
            return None
    else:
        return None

def main(argv):
    """The main routine."""
    if len(argv) == 1:
        help()
        return 1
    cmd = createCommand(argv[1:])
    help(cmd)

if __name__ == '__main__':
    sys.exit(main(sys.argv))
